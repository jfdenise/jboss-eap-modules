schema_version: 1
name: jboss.container.eap.galleon
version: '1.0'
description: Install Galleon descriptions and EAP s2i feature-pack. Configure galleon cekit modules to build fp and provision default server

envs:
- name: GALLEON_DEFINITIONS
  value: /opt/jboss/container/eap/galleon/definitions
- name: GALLEON_DEFAULT_SERVER
  value: /opt/jboss/container/eap/galleon/definitions/os-standalone-profile
- name: JBOSS_CONTAINER_EAP_GALLEON_FP_PACKAGES
  value: /opt/jboss/container/eap/galleon/eap-s2i-galleon-pack/src/main/resources/packages
  description: Modules that have packages to install must copy them there.
- name: WILDFLY_DIST_MAVEN_LOCATION
  value: "https://repository.jboss.org/nexus/content/groups/public/org/wildfly/wildfly-dist"
- name: OFFLINER_URLS
  value: "--url https://repo1.maven.org/maven2/ --url https://repository.jboss.org/nexus/content/groups/public/"
- name: GALLEON_FP_PATH
  value: "/opt/jboss/container/eap/galleon/eap-s2i-galleon-pack"
- name: GALLEON_FP_COMMON_PKG_NAME
  value: "eap.s2i.common"
# The active profiles are jboss-community-repository and securecentral
- name: GALLEON_BUILD_FP_MAVEN_ARGS_APPEND
  value: &mvnArgs "-Dcom.redhat.xpaas.repo.jbossorg"
- name: GALLEON_PROVISON_FP_MAVEN_ARGS_APPEND
  value: *mvnArgs
- name: DEBUG_GALLEON_FP_SRC
  value: true
- name: GALLEON_S2I_FP_GROUP_ID
  value: org.jboss.eap.galleon.s2i
- name: GALLEON_S2I_FP_ARTIFACT_ID
  value: eap-s2i-galleon-pack
- name: GALLEON_ADD_DS_FP
  value: true
- name: GALLEON_WF_EXTRAS_DS_VERSION
  value: 1.0.3.Final


execute:
- script: configure.sh
